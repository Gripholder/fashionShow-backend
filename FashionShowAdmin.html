<!doctype html>
<html lang="en">
    <head>

    </head>
    <body>
        <h1>Hello World!</h1>

        <div class="continer">

          <div class="dresses">

          </div>

          <div class="currentDress">

          </div>

          <div class="control">
            <button type="button" name="button" class="backward">Backward</button>
            <button type="button" name="button" class="forward">Forward</button>
            <button type="button" name="button" class="broadcast">Broadcast</button>

          </div>

        </div>





         <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.dev.js"></script>
        <script type="text/javascript">
          // let connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
          // $("#button").on("click", function() {
            // navigator.geolocation.getCurrentPosition(position => {
            // let lat = position.coords.latitude;
            // let lng = position.coords.longitude;
            // let accuracy = position.coords.accuracy;
            // console.log(lat)
            // console.log(lng)
            // console.log(accuracy)
          // })});

          let socket = io.connect('http://localhost:3000');

          socket.on('connect', data => {
            console.log('Socket connected!');
          })


          const dresses = [
            {
              name: 'black dress',
              image: 'https://sample.com',
              description: 'nice dress',
              rating: 5
            },
            {
              name: 'white dress',
              image: 'https://sample.com',
              description: 'bad dress',
              rating: 4.5
            },
            {
              name: 'yellow dress',
              image: 'https://sample.com',
              description: 'no sure dress',
              rating: 3
            }
          ]

          console.log(dresses);

          for (var i = 0; i < dresses.length; i++) {
            let dress = dresses[i]
            // $(".dresses").append(dresses[i].name);
            $('.dresses').append(
              `<h1>${dress.name}</h1>
              <img>${dress.image}</img>
              <p>${dress.description}</p>
              <p>${dress.rating}`
            )
          }


          let dressNum = 0

          $('.backward').on('click', previousDress)
          $('.forward').on('click', nextDress)
          $('.broadcast').on('click', broadcast)


          $('.currentDress').html(getCurrentDress(dresses, dressNum))



          function getCurrentDress(dresses, dressNum) {
            let singleDress = dresses[dressNum];
            return `<h1>${singleDress.name}</h1>
                    <img>${singleDress.image}</img>
                    <p>${singleDress.description}</p>
                    <p>${singleDress.rating}`
          }

          function nextDress() {
            if(dressNum < dresses.length - 1){
              dressNum++
              console.log(dressNum);
              $('.currentDress').html(getCurrentDress(dresses, dressNum))
              // socket.emit('Next Dress', dresses[dressNum])
            }
          }

          function previousDress(){
            if(dressNum > 0){
              dressNum--
              console.log(dressNum);
              $('.currentDress').html(getCurrentDress(dresses, dressNum))
              // socket.emit('Previous Dress', dresses[dressNum])
            }
          }

          function broadcast(){
            socket.emit('Dress', dresses[dressNum])
          }
        </script>
    </body>
</html>
